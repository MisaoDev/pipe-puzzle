(self["webpackChunkpipe_puzzle"]=self["webpackChunkpipe_puzzle"]||[]).push([[640],{7640:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return M}});var s=o(3099);const r=(0,s._)("h1",null,"Pipes",-1),n=(0,s.Uk)("Reiniciar");function i(t,e,o,i,c,a){const u=(0,s.up)("o-button"),l=(0,s.up)("GameBoard");return(0,s.wg)(),(0,s.iD)("div",null,[r,(0,s.Wm)(u,{rounded:"",variant:"primary"},{default:(0,s.w5)((()=>[n])),_:1}),(0,s.Wm)(l)])}var c=o(8317);const a={class:"board"},u={class:"data",style:{"margin-top":"40px",display:"flex","justify-content":"center"}},l={style:{"text-align":"left","font-size":"18px"}};function d(t,e,o,r,n,i){const d=(0,s.up)("PipeCell");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.board,((t,o)=>((0,s.wg)(),(0,s.iD)("div",{class:"board-row",key:o},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t,((t,o)=>((0,s.wg)(),(0,s.j4)(d,{key:o,ref_for:!0,ref:"cell",type:t.type,rotation:t.rotation,"onUpdate:rotation":e=>t.rotation=e,isConnected:t.isConnected,"onUpdate:isConnected":e=>t.isConnected=e,isLocked:t.isLocked,"onUpdate:isLocked":e=>t.isLocked=e,isSource:t.isSource,"onUpdate:isSource":e=>t.isSource=e,onCellRotated:e[0]||(e[0]=t=>i.checkBoard())},null,8,["type","rotation","onUpdate:rotation","isConnected","onUpdate:isConnected","isLocked","onUpdate:isLocked","isSource","onUpdate:isSource"])))),128))])))),128))]),(0,s._)("div",u,[(0,s._)("pre",l,(0,c.zw)(JSON.stringify(n.board,null,2)),1)])],64)}var p=o(5860),g=o(1820);const f={key:0,class:"source",src:g},v=["src"];function m(t,e,r,n,i,a){return(0,s.wg)(),(0,s.iD)("div",{class:(0,c.C_)(["cell",{locked:r.isLocked}]),ref:"cell",onClick:e[0]||(e[0]=t=>a.rotateCell()),onContextmenu:e[1]||(e[1]=(0,p.iM)((t=>a.lockCell()),["prevent"]))},[r.isSource?((0,s.wg)(),(0,s.iD)("img",f)):(0,s.kq)("",!0),(0,s._)("div",{class:"rotating",style:(0,c.j5)(a.rotatingStyle)},[r.isConnected?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"water",style:(0,c.j5)(a.waterStyle)},null,4)):(0,s.kq)("",!0),(0,s._)("img",{class:"pipe",src:o(3574)(`./${r.type}.svg`)},null,8,v)],4)],34)}var h={props:{type:String,rotation:Number,isConnected:Boolean,isLocked:Boolean,isSource:Boolean},emits:["update:rotation","update:isLocked","cell-rotated"],data(){return{fullSpins:0}},computed:{rotationDegrees(){return 90*this.rotation+360*this.fullSpins},rotatingStyle(){return{transform:`rotate(${this.rotationDegrees}deg)`}},waterStyle(){const t=o(1875)(`./mask${this.type}.svg`),e=o(6972);return{"mask-image":`url(${t})`,"--waterImage":`url(${e})`,"--waterTransform":`rotate(${-this.rotationDegrees}deg)`}}},methods:{rotateCell(){const{isLocked:t,rotation:e}=this;if(t)return;const o=3===e?0:e+1;0===o&&this.fullSpins++,this.$emit("update:rotation",o),this.$emit("cell-rotated",o)},lockCell(){this.$emit("update:isLocked",!this.isLocked)}}},k=o(5727);const C=(0,k.Z)(h,[["render",m],["__scopeId","data-v-1b8bc8fc"]]);var y=C;const w=0,b=1,x=2,L=3,S=(t,e=1)=>(t+e)%4,_={I:{paths:[b,L]},T:{paths:[w,b,L]},O:{paths:[b]},L:{paths:[w,b]},X:{paths:[w,b,x,L]}};var O=_;const D=[];D[w]={y:-1,x:0},D[b]={y:0,x:1},D[x]={y:1,x:0},D[L]={y:0,x:-1};const U=(t,e)=>t<0?e-1:t%e,X=(t,e)=>t<0?0:t>=e?e-1:t,B=(t,e,o,s,r,n=!1)=>{const i=D[o];let[c,a]=[t+i.y,e+i.x];c=n?U(c,r):X(c,r),a=n?U(a,s):X(a,s);const u=t===c&&e===a;return u?null:{row:c,col:a}},I=(t,e,o,s=!1)=>{const{type:r,rotation:n}=o[t][e],i=O[r],c=i.paths.map((t=>S(t,n))),[a,u]=[o.length,o[0].length],l=[];return c.forEach((o=>{const r=B(t,e,o,u,a,s);r&&l.push(r)})),l},T=t=>Math.floor(Math.random()*t),E=()=>["I","T","O","L","X"][T(5)];var $={data(){return{board:[],sourceCoorX:null,sourceCoorY:null}},components:{PipeCell:y},methods:{buildBoard(){const{board:t}=this;[...Array(10)].forEach((()=>{const e=[...Array(10)].map((()=>({type:E(),rotation:T(4),isConnected:!1,isLocked:!1,isSource:!1})));t.push(e)})),this.sourceCoorX=T(10),this.sourceCoorY=T(10);const e=t[this.sourceCoorX][this.sourceCoorY];e.isSource=!0,e.isConnected=!0,this.checkBoard()},connectCell(t,e){const{board:o}=this;o[t][e].isConnected=!0;const s=I(t,e,o);s.forEach((s=>{const r=o[s.row][s.col];if(r.isConnected)return;const n=I(s.row,s.col,o);n.find((o=>o.row===t&&o.col===e))&&this.connectCell(s.row,s.col)}))},checkBoard(){this.board.forEach((t=>t.forEach((t=>t.isConnected=!1)))),this.connectCell(this.sourceCoorX,this.sourceCoorY)}},created(){this.buildBoard()}};const Y=(0,k.Z)($,[["render",d],["__scopeId","data-v-199a1652"]]);var j=Y,z={components:{GameBoard:j}};const N=(0,k.Z)(z,[["render",i]]);var M=N},3574:function(t,e,o){var s={"./I.svg":3267,"./L.svg":2465,"./O.svg":1383,"./T.svg":5529,"./X.svg":3724,"./bubble.svg":7143,"./maskI.svg":9831,"./maskL.svg":5768,"./maskO.svg":8075,"./maskT.svg":8637,"./maskX.svg":6855,"./source.svg":1820,"./water1.svg":7791};function r(t){var e=n(t);return o(e)}function n(t){if(!o.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=n,t.exports=r,r.id=3574},1875:function(t,e,o){var s={"./maskI.svg":9831,"./maskL.svg":5768,"./maskO.svg":8075,"./maskT.svg":8637,"./maskX.svg":6855};function r(t){var e=n(t);return o(e)}function n(t){if(!o.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=n,t.exports=r,r.id=1875},3267:function(t,e,o){"use strict";t.exports=o.p+"img/I.04166824.svg"},2465:function(t,e,o){"use strict";t.exports=o.p+"img/L.101b4657.svg"},1383:function(t,e,o){"use strict";t.exports=o.p+"img/O.123d5d69.svg"},5529:function(t,e,o){"use strict";t.exports=o.p+"img/T.c0706377.svg"},3724:function(t,e,o){"use strict";t.exports=o.p+"img/X.57fba82d.svg"},7143:function(t,e,o){"use strict";t.exports=o.p+"img/bubble.35e07ac0.svg"},9831:function(t,e,o){"use strict";t.exports=o.p+"img/maskI.752241d8.svg"},5768:function(t,e,o){"use strict";t.exports=o.p+"img/maskL.e8c5c9a9.svg"},8075:function(t,e,o){"use strict";t.exports=o.p+"img/maskO.0b96c211.svg"},8637:function(t,e,o){"use strict";t.exports=o.p+"img/maskT.e18d473c.svg"},6855:function(t,e,o){"use strict";t.exports=o.p+"img/maskX.a81238bc.svg"},1820:function(t,e,o){"use strict";t.exports=o.p+"img/source.755aa2d8.svg"},7791:function(t,e,o){"use strict";t.exports=o.p+"img/water1.46adf2e2.svg"},6972:function(t,e,o){"use strict";t.exports=o.p+"img/water1.e81fb525.png"}}]);
//# sourceMappingURL=640.2f055f15.js.map